<?xml version="1.0"?>
<launch>
  <env name="GAZEBO_MODEL_PATH" value="$(find hamster_vehicle_gazebo):$(find hamster_vehicle_gazebo)/models"/>
  <arg name="use_joystick" default="false" />
  <arg name="world_name" default="$(find hamster_vehicle_gazebo)/worlds/cogni_office.world"/>
  <arg name="agent" default="agent1"/>
  <arg name="x" default="0.0"/>
  <arg name="y" default="0.0"/>
  <arg name="z" default="0.5"/>
  <arg name="roll" default="0.0"/>
  <arg name="pitch" default="0.0"/>
  <arg name="yaw" default="0.0"/>
  <arg name="cmd_timeout" default="0.5"/>

  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(arg world_name)"/>
    <arg name="gui" value="true"/>
    <arg name="headless" value="false"/>
  </include>  
   
  <param name="robot_description" command="$(find xacro)/xacro.py $(find hamster_vehicle_description)/urdf/hamster.urdf.xacro"/>

  <include file="$(find hamster_vehicle_description)/launch/hamster_agent.launch">
    <arg name="agent" value="$(arg agent)"/>
    <arg name="x" value="$(arg x)"/>
    <arg name="y" value="$(arg y)"/>
    <arg name="z" value="$(arg z)"/>
    <arg name="roll" value="$(arg roll)"/>
    <arg name="pitch" value="$(arg pitch)"/>
    <arg name="yaw" value="$(arg yaw)"/>
    <arg name="cmd_timeout" value="$(arg cmd_timeout)"/>
  </include>
  
  <group if="$(arg use_joystick)">
    <include file="$(find hamster_vehicle_gazebo)/launch/joystick.launch">
      <arg name="agent" default="$(arg agent)"/>
      <arg name="scale_linear" default="2"/>
      <arg name="scale_angular" default="4"/>
    </include>
  </group>
 
  <node pkg="rostopic" type="rostopic" name="rotate_lidar_for_$(arg agent)" args="pub /$(arg agent)/body_to_hokuyo_mesh_ctrl/command std_msgs/Float64 'data: 8.0'"/>
</launch>
